<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1046px" height="668px" viewBox="-0.5 -0.5 1046 668" content="&lt;mxfile modified=&quot;2019-06-06T12:55:33.592Z&quot; host=&quot;www.draw.io&quot; agent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/74.0.3729.169 Chrome/74.0.3729.169 Safari/537.36&quot; etag=&quot;nvukb8t2Z04jKaz1n4nu&quot; version=&quot;10.7.5&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;cf63cc30-8442-5d33-6bd1-2f34b1dd6ee1&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="486" y="78" width="425" height="563" rx="63.75" ry="63.75" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="end" font-size="14px"><text x="554.12" y="72.12">GIN CI VM</text></g><rect x="18" y="226" width="180" height="154" rx="23.1" ry="23.1" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="end" font-size="14px"><text x="51.12" y="220.12">Local</text></g><rect x="512" y="225" width="202" height="390" rx="30.3" ry="30.3" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="end" font-size="14px"><text x="560.12" y="219.12">gin-proc</text></g><rect x="235" y="225" width="160" height="222" rx="24" ry="24" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="end" font-size="14px"><text x="263.12" y="219.12">GIN</text></g><path d="M 680.1 364.81 L 934.11 363.53" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 672.1 364.85 L 680.08 362.14 L 680.11 367.48 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 942.11 363.49 L 934.12 366.2 L 934.1 360.87 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><rect fill="#ffffff" stroke="none" x="773" y="345" width="95" height="15" stroke-width="0"/><text x="819.72" y="355.08">authentication (d)</text></g><path d="M 378.83 304.17 L 532.04 303.53" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 540.04 303.49 L 532.05 306.19 L 532.03 300.86 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-size="12px"><rect fill="#ffffff" stroke="none" x="413" y="285" width="68" height="15" stroke-width="0"/><text x="413.22" y="294.65">webhook (a)</text></g><path d="M 557.45 426.93 L 318.83 426.93 L 318.83 360.62" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 318.83 352.62 L 321.49 360.62 L 316.16 360.62 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><rect fill="#ffffff" stroke="none" x="408" y="408" width="67" height="15" stroke-width="0"/><text x="440.1" y="418.28">backflow (e)</text></g><rect x="944" y="313.5" width="100" height="100" rx="15" ry="15" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="end" font-size="14px"><text x="987.12" y="307.62">Cluster</text></g><path d="M 181.59 304.17 L 248.59 304.17" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 256.59 304.17 L 248.59 306.84 L 248.59 301.51 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-size="12px"><rect fill="#ffffff" stroke="none" x="175" y="282" width="2" height="15" stroke-width="0"/></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="19.5" y="480.5">(a) [user]/[repo]/[branch]/[cibuild]</text><text x="19.5" y="494.5">      e.g. mdenker/reponame/master/snakemake</text><text x="19.5" y="508.5">(b) container persistance and reuse</text><text x="19.5" y="522.5">(c) timestamp handling: local vs. commit(b) snakemake specific remotes</text><text x="19.5" y="536.5">      possible gin remote</text><text x="19.5" y="550.5">(d) authentication via gin token exchange</text><text x="19.5" y="564.5">(e) backflow of out.in to the gin repo</text><text x="19.5" y="578.5">     - new branch + pull request</text><text x="19.5" y="592.5">     - downloadable zip file</text><text x="19.5" y="606.5">(f) snakemake build graph visualization</text><text x="19.5" y="620.5">(g) check whether custom .drone.yml can be named .gin-proc.yaml</text><text x="19.5" y="634.5">(h) should not be publicly accessible, cf (b)</text><text x="19.5" y="648.5">(i) should be publicly accessible cf (e) and (f)</text></g><path d="M 614 449.69 L 614.19 473.8" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 614.26 481.8 L 611.53 473.82 L 616.86 473.78 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-size="12px"><rect fill="#ffffff" stroke="none" x="568" y="446" width="2" height="15" stroke-width="0"/></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="1.5" y="101">snakefile example:</text><text x="1.5" y="115">rule:</text><text x="1.5" y="129">  input: gin://in.dat</text><text x="1.5" y="143">  output: gin://out.dat -m "job success commit message"</text><text x="1.5" y="157">  shell: python codefile.py in.dat out.dat</text></g><g fill="#000000" font-family="Helvetica" font-size="20px"><text x="1.5" y="21.5">gin-proc snakemake microservice workflow [DRAFT]</text></g><rect x="542" y="255" width="144" height="195" rx="21.6" ry="21.6" fill="none" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="613.5" y="247.81">snakemake CI container (b)</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="551" y="278">- gin get repo</text><text x="551" y="292">- parse .gin-proc.yml</text><text x="551" y="306">- gin get submodules</text><text x="551" y="320">- install dependencies</text><text x="551" y="334">- run snakemake</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="559.5" y="432.5">- out.dat</text></g><rect x="562" y="341" width="108" height="48" rx="7.2" ry="7.2" fill="none" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="615.5" y="405.19">snakemake conda</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="568.5" y="361.5">execute rules</text><text x="568.5" y="375.5">gin get content (c)</text></g><path d="M 514.69 175.21 L 349.17 175.21 L 349.17 247.73" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 349.17 255.73 L 346.51 247.73 L 351.84 247.73 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><rect fill="#ffffff" stroke="none" x="375" y="180" width="97" height="15" stroke-width="0"/><text x="422.71" y="190.05">Commit config file</text></g><rect x="515" y="115" width="202" height="80" rx="12" ry="12" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="end" font-size="14px"><text x="633.12" y="109.12">GIN CI User forms</text></g><rect x="550" y="485" width="130" height="100" rx="15" ry="15" fill="none" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="614.5" y="601.19">gin-proc features</text></g><path d="M 318.83 257.97 L 318.83 135.21 L 504.45 135.21" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 512.45 135.21 L 504.45 137.87 L 504.45 132.54 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><rect fill="#ffffff" stroke="none" x="333" y="117" width="139" height="15" stroke-width="0"/><text x="401.57" y="127.05">GIN forward to form on CI</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="532.5" y="138.5">a) Auto-create .gin-proc.yml</text><text x="532.5" y="152.5">    - select build type</text><text x="532.5" y="166.5">    - select required files</text><text x="532.5" y="180.5">b) Update existing config file</text></g><rect x="739" y="476" width="148" height="75" rx="11.25" ry="11.25" fill="#ffffff" stroke="#808080" stroke-width="2" stroke-dasharray="6 6" pointer-events="none"/><g fill="#808080" font-family="Helvetica" text-anchor="middle" font-size="14px"><text x="812.16" y="470.12">Repo cache, results</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="750.5" y="496.5">Caching repositories (h)</text><text x="750.5" y="510.5">Intermediate results (h)</text><text x="750.5" y="538.5">Zip download results (i)</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="568.5" y="508.5">Job queue</text><text x="568.5" y="522.5">Container registry</text><text x="568.5" y="536.5">Statistics</text><text x="568.5" y="550.5">RunLogs</text><text x="568.5" y="564.5">DAG (f)</text></g><rect x="259" y="258" width="120" height="92.31" rx="13.85" ry="13.85" fill="none" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="244.19" y="253.81">repo [master]</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="267.5" y="278.5">snakefile</text><text x="267.5" y="292.5">codefile.py</text><text x="267.5" y="306.5">in.dat</text><text x="267.5" y="334.5">.gin-proc.yml (g)</text></g><rect x="33" y="268" width="150" height="71" rx="10.65" ry="10.65" fill="none" stroke="#000000" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="77.5" y="262.81">repo [master]</text></g><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="38" y="294">change in 'in.dat'</text><text x="38" y="308">commit -m "gin-proc build"</text><text x="38" y="322">push / PR</text></g><path d="M 658.17 455.68 L 730.52 507.84" fill="none" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 651.68 451 L 659.72 453.51 L 656.61 457.84 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/><path d="M 737.01 512.52 L 728.96 510 L 732.08 505.68 Z" fill="#666666" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="none"/></g></svg>